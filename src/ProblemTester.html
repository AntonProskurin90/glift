<html>
<head>

<title> ProblemTester </title>
<script type="text/javascript" src="libs/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="libs/raphael-min.js"></script>
<script type="text/javascript" src="testdata/sgfs.js"></script>

<!-- AUTO-GEN-DEPS -->
<!-- Compiled -->
<script type="text/javascript" src="compiled/glift.js"></script>
<!-- Otre Tests -->
<script type="text/javascript" src="./glift_test.js"></script>
<!-- Util Tests -->
<script type="text/javascript" src="util/point_test.js"></script>
<script type="text/javascript" src="util/util_test.js"></script>
<!-- Themes Tests -->
<script type="text/javascript" src="themes/themes_test.js"></script>
<!-- Displays Tests -->
<script type="text/javascript" src="displays/bbox_test.js"></script>
<script type="text/javascript" src="displays/board_points_test.js"></script>
<script type="text/javascript" src="displays/cropbox_test.js"></script>
<script type="text/javascript" src="displays/environment_test.js"></script>
<script type="text/javascript" src="displays/resized_box_test.js"></script>
<!-- Displays raphael Tests -->
<script type="text/javascript" src="displays/raphael/raphael_test.js"></script>
<!-- Rules Tests -->
<script type="text/javascript" src="rules/goban_test.js"></script>
<script type="text/javascript" src="rules/intersections_test.js"></script>
<script type="text/javascript" src="rules/movetree_test.js"></script>
<script type="text/javascript" src="rules/properties_test.js"></script>
<script type="text/javascript" src="rules/treepath_test.js"></script>
<!-- Controllers Tests -->
<script type="text/javascript" src="controllers/base_controller_test.js"></script>
<script type="text/javascript" src="controllers/controllers_test.js"></script>
<script type="text/javascript" src="controllers/static_problem_study_test.js"></script>
<!-- Bridge Tests -->
<script type="text/javascript" src="bridge/cropping_test.js"></script>

<!-- END-AUTO-GEN-DEPS -->

    <style>
      * {
        margin: 0;
        padding: 0;
      }
      #glift_display1 {
        height:95%;
        position:relative;
      }
    </style>
  </head>

  <body>
    <div id="wrap" style="position:relative;">
      <div id="gheader"></div>
      <div id="glift_display1"></div>
      <div id="extra_info"></div>
      <script type="text/javascript">
        //parsing test
        var displayTypes = glift.enums.displayTypes;
        var boardRegions = glift.enums.boardRegions;
        var point = glift.util.point;

        var hoverColors = {
          "BLACK": "BLACK_HOVER",
          "WHITE": "WHITE_HOVER"
        };

        var controller = glift.createController({
          controllerType: "STATIC_PROBLEM_STUDY",
          sgfString: testdata.sgfs.complexproblem
        });
        var cropping = glift.bridge.getFromMovetree(controller.movetree);

        var display = glift.createDisplay({
            divId: "glift_display1",
            boardRegion: cropping
        });
        glift.bridge.setDisplayState(controller.getEntireBoardState(), display);
        display.enableAutoResizing();

        display.setClickHandler(function(pt) {
          var currentPlayer = controller.getCurrentPlayer();
          var data = controller.addStone(pt, currentPlayer);
          $('#extra_info').text(data.message + '//' + (data.result || ''));
          if (data.data !== undefined) {
            glift.bridge.setDisplayState(data.data, display);
          }
        });

        display.setHoverInHandler(function(pt) {
          var currentPlayer = controller.getCurrentPlayer();
          if (controller.canAddStone(pt, currentPlayer)) {
            display.setColor(pt, hoverColors[currentPlayer]);
          }
        });

        display.setHoverOutHandler(function(pt) {
          var currentPlayer = controller.getCurrentPlayer();
          if (controller.canAddStone(pt, currentPlayer)) {
            display.setColor(pt, 'EMPTY');
          }
        });
      </script>
    </div>
  </body>
</html>

