(function(){var b=window.glift||{};b.create=function(a){return b.displays.getImpl(a)};window.glift=b})();
glift.processOptions=function(b){var a={intersections:19,divId:"glift_display",theme:"DEFAULT",boardRegion:"ALL",displayConfig:{}},c;for(c in b){var e=b[c];switch(c){case "intersections":"number"==glift.util.typeOf(e)&&0<e?a.intersections=e:glift.util.logz("Intersection value : "+c);break;case "theme":glift.themes.has(e)?a.theme=e:glift.util.logz("Unknown theme: "+e);break;case "divId":null!==document.getElementById(e)?a.divId=e:glift.util.logz("Could not find div with id: "+e);break;case "boardRegion":void 0!==
glift.enums.boardRegions[e]?a.boardRegion=e:glift.util.logz("Unknown board region: "+e);break;case "displayConfig":"object"===glift.util.typeOf(e)?a.displayConfig=e:glift.util.logz("displayConfig not an object: "+e);break;default:glift.util.logz("Unknown option key: "+c)}}return a};
glift.util={logz:function(b){var a=b;if("array"===glift.util.typeOf(b)||"object"===glift.util.typeOf(b))a=JSON.stringify(b);console.log(""+a);return glift.util.none},beget:function(b){var a=function(){};a.prototype=b;return new a},typeOf:function(b){var a=typeof b;"object"===a&&(b?b instanceof Array&&(a="array"):a="null");return a},isArray:function(b){return b&&"object"===typeof b&&b.constructor===Array},inBounds:function(b,a){return b<a&&0<=b},outBounds:function(b,a){return b>=a||0>b},intersection:function(b,
a){var c={},e;for(e in b)void 0!==a[e]&&(c[e]=1);return c},getKeyWithDefault:function(b,a,c){void 0===b[a]&&(b[a]=c);return b[a]},sizeOf:function(b){var a=0,c;for(c in b)a+=1;return a},varDefined:function(b,a){var c=a||"";if(void 0===b)throw"Argument cannot be undefined"+(""!==c?": "+c:c);},defined:function(){for(var b=0;b<arguments.length;b++)if(void 0===arguments[b])return!1;return!0},assertDefined:function(b,a){if(void 0===b)throw a;return glift.util.none},checkArgsDefined:function(b,a){for(var c=
0;c<a;c++)if(void 0===b[c])throw"Argument "+c+" of "+b.length+" must be defined, but is undefined";return glift.util.none},setMethods:function(b,a){for(var c in a)b[c]=a[c].bind(b);return b}};glift.util.debugl=function(b){glift.debugOn&&glift.util.log(b)};glift.util.log=function(b){("array"===glift.util.typeOf(b)||"object"===glift.util.typeOf(b))&&JSON.stringify(b);void 0!==console&&void 0!==console.log&&console.log(b)};
(function(){var b=function(){this.type="none"};b.prototype={toString:function(){return"None"}};glift.util.none=new b})();glift.util.colors={isLegalColor:function(b){return b===enums.states.BLACK||b===enums.states.WHITE||b===enums.states.EMPTY},oppositeColor:function(b){return b===enums.states.BLACK?enums.states.WHITE:b===enums.states.WHITE?enums.states.BLACK:b}};
glift.enums={states:{BLACK:"BLACK",WHITE:"WHITE",EMPTY:"EMPTY"},directions:{LEFT:"LEFT",RIGHT:"RIGHT",TOP:"TOP",BOTTOM:"BOTTOM"},boardRegions:{LEFT:"LEFT",RIGHT:"RIGHT",TOP:"TOP",BOTTOM:"BOTTOM",TOP_LEFT:"TOP_LEFT",TOP_RIGHT:"TOP_RIGHT",BOTTOM_LEFT:"BOTTOM_LEFT",BOTTOM_RIGHT:"BOTTOM_RIGHT",ALL:"ALL"},marks:{CIRCLE:"CIRCLE",LETTER:"LETTER",SQUARE:"SQUARE",STONE:"STONE",TRIANGLE:"TRIANGLE",XMARK:"XMARK"}};
(function(){glift.logger=function(b,a){return new glift.Log(b,a)};glift.Log=function(b,a){this.name="#"+b;this.num=a;this.curMsgs=0};glift.Log.prototype.println=function(b){var a=b;if("array"===glift.util.typeOf(b)||"object"===glift.util.typeOf(b))a=JSON.stringify(b);$("<p>"+a+"</p>").appendTo(this.name);this.curMsgs++;this.curMsgs>this.num&&($(this.name).children("p:first").remove(),this.curMsgs-=1)};glift.Log.prototype.printv=function(){for(var b=arguments,a="",a=b[0],c=1;c<b.length;c++)a=a+","+
b[c];this.println(a)};glift.Log.prototype.log=glift.Log.prototype.println;glift.Log.prototype.printArr=function(b){for(var a=0;a<b.length;a++)this.println(b[a].toString());this.println("----")}})();glift.math={abs:function(b){return 0<=b?b:-1*b},max:function(b,a){return b>a?b:a},min:function(b,a){return b>a?a:b},isEven:function(b){return 0==b%2?!0:!1},getRandomInt:function(b,a){return Math.floor(Math.random()*(a-b+1))+b}};
(function(){var b={};glift.util.point=function(c,e){var d=glift.util.coordToString(c,e);if(void 0!==b[d])return b[d];var f=new a(c,e);return b[d]=f};glift.util.uncachedPoint=function(c,b){return new a(c,b)};glift.util._cacheHasPoint=function(a,e){return void 0!==b[glift.util.coordToString(a,e)]};var a=function(a,b){this.x=function(){return a};this.y=function(){return b};this.toString=function(){return glift.util.coordToString(a,b)};this.equals=function(d){return a===d.x()&&b===d.y()};this.toSgfCoord=
function(){return String.fromCharCode(a+97)+String.fromCharCode(b+97)}};a.prototype={hash:function(){return this.toString()},value:function(){return this.toString()},log:function(){glift.util.logz(this.toString())}};glift.util.coordToString=function(a,b){return a+","+b};glift.util.pointFromString=function(a){try{var b=a.split(","),d=parseInt(b[0]),f=parseInt(b[1]);return glift.util.point(d,f)}catch(g){throw"Parsing Error! Couldn't parse a point from: "+a;}};glift.util.pointFromHash=function(a){return glift.util.pointFromString(a)}})();
glift.util.regions={getComponents:function(b){var a=glift.enums.boardRegions,c={};b===a.TOP_LEFT?(c[a.TOP]=1,c[a.LEFT]=1):b===a.TOP_RIGHT?(c[a.TOP]=1,c[a.RIGHT]=1):b===a.BOTTOM_LEFT?(c[a.BOTTOM]=1,c[a.LEFT]=1):b===a.BOTTOM_RIGHT&&(c[a.BOTTOM]=1,c[a.RIGHT]=1);return c}};
glift.testUtil={getAllElements:function(b){var a=[];b.forEach(function(c){a.push(c)});return a},assertEmptyPaper:function(b){b=glift.testUtil.getAllElements(b);deepEqual(b.length,0,"Paper should have been emptied")},assertFullDiv:function(b){ok(""!==$("#"+b).text(),"Div should contain contents")},assertEmptyDiv:function(b){deepEqual($("#"+b).text(),"","Div should not contain contents")}};
glift.themes={registered:{},get:function(b){var a=glift.themes.registered;return!(b in a)?glift.util.none:a[b]},has:function(b){return b in glift.themes.registered}};
glift.themes.registered.DEFAULT={board:{bgColor:"#f5be7e",lineColor:"black",lineSize:1,edgeLineSize:1,starPointSize:0.15,textColor:"white"},stones:{hoverOpacity:0.5,EMPTY:{fill:"blue",opacity:0},BLACK:{fill:"black",opacity:1,"stroke-width":1,stroke:"black"},BLACK_HOVER:{fill:"black",opacity:0.5},WHITE:{stroke:"black",fill:"white",opacity:1,"stroke-width":1},WHITE_HOVER:{fill:"white",opacity:0.5}},marks:{XMARK:{}}};
glift.displays={getImpl:function(b){b=glift.processOptions(b);var a=glift.displays.environment.get(b);return glift.displays.raphael.create(a,b.theme).draw()}};
(function(){glift.displays.bboxFromPts=function(a,c){return new b(a,c)};glift.displays.bbox=function(a,c,e){return new b(a,glift.util.point(a.x()+c,a.y()+e))};var b=function(a,c){this.topLeft=function(){return a};this.botRight=function(){return c};this.center=function(){return glift.util.point(glift.math.abs((c.x()-a.x())/2)+a.x(),glift.math.abs((c.y()-a.y())/2)+a.y())};this.width=function(){return c.x()-a.x()};this.height=function(){return c.y()-a.y()};this.top=function(){return a.y()};this.left=
function(){return a.x()};this.bottom=function(){return c.y()};this.right=function(){return c.x()}};b.prototype={draw:function(a,c){a.rect(this.topLeft().x(),this.topLeft().y(),this.width(),this.height()).attr({fill:c,opacity:0.5})},contains:function(a){return a.x()>=this.topLeft().x()&&a.x()<=this.botRight().x()&&a.y()>=this.topLeft().y()&&a.y()<=this.botRight().y()},log:function(){glift.util.logz("TopLeft: "+JSON.stringify(this.topLeft()));glift.util.logz("BotRight: "+JSON.stringify(this.botRight()));
glift.util.logz("Width: "+this.width());glift.util.logz("Height: "+this.height())},equals:function(a){return a.topLeft&&this.topLeft().equals(a.topLeft())&&a.botRight&&this.botRight().equals(a.botRight())}}})();
(function(){glift.displays.boardPoints=function(){return new b};glift.displays.boardPointsFromLineBox=function(a){for(var c=a.spacing,b=a.bbox,d=b.left()+a.extensionBox.left()*c,b=b.top()+a.extensionBox.top()*c,f=a.pointTopLeft.x(),g=a.pointTopLeft.y(),k=glift.displays.boardPoints(),l=0;l<=a.yPoints;l++)for(var h=0;h<=a.xPoints;h++){var m=d+h*c,n=b+l*c,p=glift.util.point(f+h,g+l),m=glift.util.point(m,n);k.add(p,m)}k.setSpacing(c);return k};var b=function(){this.points={};this.spacing=void 0};b.prototype=
{add:function(a,b){void 0===this.points[a.hash()]&&(this.points[a.hash()]=b);return this},setSpacing:function(a){this.spacing=a;return this},getCoords:function(){return this.points},hasCoord:function(a){return void 0!==this.points[a.hash()]},getCoord:function(a){return this.points[a.hash()]},_debugDraw:function(a,b){for(var e in this.points){var d=this.points[e];a.circle(d.x(),d.y(),this.spacing/2).attr({fill:b,opacity:0.3})}}}})();
(function(){glift.displays.cropbox={LINE_EXTENSION:0.5,DEFAULT_EXTENSION:0,OVERFLOW:1.5,create:function(a,c,e,d){return new b(a,c,e,d)},getFromRegion:function(a,b){var e=glift.util,d=glift.enums.boardRegions;a=a||d.ALL;var f=b-1,g=Math.ceil(f/2),k=0,l=0,h=f,m=f,n=this.DEFAULT_EXTENSION,p=this.DEFAULT_EXTENSION,r=this.DEFAULT_EXTENSION,q=this.DEFAULT_EXTENSION;switch(a){case d.LEFT:m=g+1;q=this.LINE_EXTENSION;break;case d.RIGHT:l=g-1;p=this.LINE_EXTENSION;break;case d.TOP:h=g+1;r=this.LINE_EXTENSION;
break;case d.BOTTOM:k=g-1;n=this.LINE_EXTENSION;break;case d.TOP_LEFT:h=g+1;r=this.LINE_EXTENSION;m=g+2;q=this.LINE_EXTENSION;break;case d.TOP_RIGHT:h=g+1;r=this.LINE_EXTENSION;l=g-2;p=this.LINE_EXTENSION;break;case d.BOTTOM_LEFT:k=g-1;n=this.LINE_EXTENSION;m=g+2;q=this.LINE_EXTENSION;break;case d.BOTTOM_RIGHT:k=g-1,n=this.LINE_EXTENSION,l=g-2,q=this.LINE_EXTENSION}d=glift.displays.bboxFromPts(e.point(l,k),e.point(m,h));e=glift.displays.bboxFromPts(e.point(p,n),e.point(q,r));return glift.displays.cropbox.create(d,
e,0,f)}};var b=function(a,b,e,d){var f=glift.displays.cropbox.OVERFLOW;this.cbox=function(){return a};this.extBox=function(){return b};this.xPoints=function(){return a.width()};this.yPoints=function(){return a.height()};this.widthMod=function(){return a.width()+b.topLeft().x()+b.botRight().x()+f};this.heightMod=function(){return a.height()+b.topLeft().y()+b.botRight().y()+f}}})();
(function(){glift.displays.createBase=function(a){a=glift.themes.get(a.themeName);return new b(a)};var b=function(a,b){this.theme=b};b.prototype={setTheme:function(a){throw"Not implemented";},setBoardRegion:function(a){throw"Not implemented";},setHandler:function(a,b){throw"Not implemented";},redraw:function(){throw"Not implemented";},setStone:function(a,b,e){throw"Not implemented";},getSidebar:function(a){throw"Not implemented";}}})();
(function(){var b=glift.util;glift.displays.environment={TOPBAR_SIZE:0.1,BOTTOMBAR_SIZE:0.1,get:function(b){return new a(glift.processOptions(b))},getInitialized:function(a){return glift.displays.environment.get(a).init()}};var a=function(a){this.divId=a.divId;this.boardRegion=a.boardRegion;this.intersections=a.intersections;this.cropbox=a.displayConfig._cropbox||glift.displays.cropbox.getFromRegion(this.boardRegion,this.intersections);this.widthOverride=this.heightOverride=!1;void 0!==a.displayConfig._divHeight&&
(this.divHeight=a.displayConfig._divHeight,this.heightOverride=!0);void 0!==a.displayConfig._divWidth&&(this.divWidth=a.displayConfig._divWidth,this.widthOverride=!0)};a.prototype={init:function(){(!this.heightOverride||!this.widthOverride)&&this._resetDimensions();var a=this.divHeight,e=this.divWidth,d=this.cropbox,a=glift.displays.bboxFromPts(b.point(0,0),b.point(e,a)),e=glift.displays.getResizedBox(a,d),d=glift.displays.getLineBox(e,d),f=glift.displays.boardPointsFromLineBox(d),g=glift.displays.getLineSegments(d);
this.divBox=a;this.goBoardBox=this.resizedBox=e;this.goBoardLineBox=d;this.boardPoints=f;this.lineSegments=g;return this},setIntersections:function(a){this.intersections=a},_resetDimensions:function(){this.divHeight=$("#"+this.divId).innerHeight();this.divWidth=$("#"+this.divId).innerWidth();this.needsInitialization=!0;return this},_debugDrawAll:function(){var a=Raphael(this.divId,"100%","100%");this.divBox.draw(a,"yellow");this.resizedBox.draw(a,"red");this.goBoardBox.draw(a,"orange");this.goBoardLineBox.bbox.draw(a,
"red");this.goBoardLineBox._debugDrawLines(a,"blue");this.boardPoints._debugDraw(a,"green");this.lineSegments._debugDraw(a,"black")}}})();
(function(){glift.displays.getLineBox=function(a,c){var e=glift.displays.cropbox.OVERFLOW,d=a.width()/c.widthMod(),f=a.height()/c.heightMod(),g=f*e/2,k=d*e/2,l=f*(c.heightMod()-e/2),e=d*(c.widthMod()-e/2),h=a.topLeft().x(),m=a.topLeft().y(),g=glift.displays.bboxFromPts(glift.util.point(k+h,g+m),glift.util.point(e+h,l+m));return new b(g,d,f,c)};var b=function(a,b,e,d){this.bbox=a;this._xSpacing=b;this._ySpacing=e;this.spacing=b;this.extensionBox=d.extBox();this.pointTopLeft=d.cbox().topLeft();this.xPoints=
d.xPoints();this.yPoints=d.yPoints()};b.prototype={_debugDrawLines:function(a,b){for(var e=this.bbox.left(),d=this.bbox.top();e<=this.bbox.right();e+=this.spacing,d+=this.spacing)a.rect(e,d,this.spacing,this.spacing).attr({fill:b,opacity:0.5})}}})();
(function(){glift.displays.getLineSegments=function(c){for(var e=new b,d=glift.util.point,f=c.spacing,g=c.bbox.left()+c.extensionBox.left()*f,k=c.bbox.top(),l=c.bbox.bottom(),h=0;h<=c.xPoints;h++){var m=g+h*f,n=c.pointTopLeft.x()+h;e.vert.push(new a(d(m,k),d(m,l),n))}g=c.bbox.left();l=c.bbox.right();k=c.bbox.top()+c.extensionBox.top()*f;for(h=0;h<=c.yPoints;h++)m=k+h*f,n=c.pointTopLeft.y()+h,e.horz.push(new a(d(g,m),d(l,m),n));return e};var b=function(){this.horz=[];this.vert=[]};b.prototype._debugDraw=
function(a,b){for(var d=glift.displays.raphael.rutil,f=[this.horz,this.vert],g=0;g<f.length;g++)for(var k=f[g],l=0;l<k.length;l++)a.path(d.svgMovePt(k[l].topLeft)+d.svgLineAbsPt(k[l].botRight))};var a=function(a,b,d){this.topLeft=a;this.botRight=b;this.ordinal=d}})();
glift.displays.getResizedBox=function(b,a){var c=glift.util,e=glift.displays.getCropDimensions(b.width(),b.height(),a),d=e.width(),f=e.height(),g=b.width()-d,k=b.height()-f,l=0===g?0:g/2,h=0===k?0:k/2,m=b.topLeft().x()+l,n=b.topLeft().y()+h,c=glift.displays.bbox(c.point(m,n),d,f);c._debugInfo=function(){return{newDims:e,newWidth:d,newHeight:f,xDiff:g,yDiff:k,xDelta:l,yDelta:h,newLeft:m,newTop:n}};return c};
glift.displays.getCropDimensions=function(b,a,c){var e=a/b;c=c.heightMod()/c.widthMod();var d=a,f=b;e>c?d=b*c:e<c&&(f=a/c);return{height:function(){return d},width:function(){return f}}};
(function(){glift.displays.raphael={create:function(a,b){return new glift.displays.raphael.Display(a,b)}};glift.displays.raphael.Display=function(a,b){this._objectHistory=[];this._paper=glift.util.none;this._environment=a;this._themeName=b;this._theme=glift.themes.get(b);this._stones=glift.util.none;this.intersections=function(){return this._environment.intersections};this.divId=function(){return this._environment.divId};this.theme=function(){return this._themeName};this.boardRegion=function(){return this._environment.boardRegion}};
var b=glift.displays.raphael.Display;b.prototype.init=function(){this._paper=Raphael(this.divId(),"100%","100%");this._environment.init();return this};b.prototype.draw=function(){this.init();for(var a=0;a<this._objectHistory.length;a++)this._objectHistory[a].destroy();this._objectHistory=[this.createBoardBase(),this.createBoardLines(),this.createStarPoints()];this._stones=this.createStones();this._objectHistory.push(this._stones);return this};b.prototype.destroy=function(){for(var a=0;a<this._objectHistory.length;a++)this._objectHistory[a].destroy();
this._objectHistory=[];this._paper.remove();this._stones=this._paper=glift.util.none;$("#"+this.divId()).empty()};b.prototype.recreate=function(a){this.destroy();a=glift.processOptions(a);this._environment=glift.displays.environment.get(a);this._themeName=a.theme;this._theme=glift.themes.get(a.theme);return this};b.prototype.setColor=function(a,b){if(this._stones!==glift.util.none)return this._stones.setColor(a,b),this;throw"Stones === none! Cannot setColor";};b.prototype.setClickHandler=function(a){this._stones.setClickHandler(a)};
b.prototype.setHoverInHandler=function(a){this._stones.setHoverInHandler(a)};b.prototype.setHoverOutHandler=function(a){this._stones.setHoverOutHandler(a)}})();
(function(){glift.displays.raphael.Display.prototype.createBoardBase=function(){return(new b(this._paper,this._environment,this._theme.board)).draw()};var b=function(a,b,e){this.paper=a;this.environment=b;this.subtheme=e;this.rect=glift.util.none};b.prototype={draw:function(){var a=this.environment.goBoardBox;this.destroy();this.rect=this.paper.rect(a.topLeft().x(),a.topLeft().y(),a.width(),a.height());this.rect.attr({fill:this.subtheme.bgColor});return this},redraw:function(){return this.draw()},
destroy:function(){this.rect&&this.rect!==glift.util.none&&this.rect.remove();return this}}})();
(function(){glift.displays.raphael.Display.prototype.createBoardLines=function(){return(new b(this._paper,this._environment,this._theme.board)).draw()};var b=function(a,b,d){this.paper=a;this.environment=b;this.subtheme=d;this.vertSet=this.horzSet=glift.util.none};b.prototype={draw:function(){this.destroy();var b=this.paper,e=this.subtheme,d=this.environment.lineSegments,f=this.environment.intersections;this.horzSet=a(b,d.horz,f,e.lineSize,e.edgeLineSize);this.vertSet=a(b,d.vert,f,e.lineSize,e.edgeLineSize);
return this},destroy:function(){this.horzSet&&this.horzSet!==glift.util.none&&this.horzSet.remove();this.vertSet&&this.vertSet!==glift.util.none&&this.vertSet.remove();return this}};var a=function(a,b,d,f,g){for(var k=a.set(),l=glift.displays.raphael.rutil,h=0;h<b.length;h++){var m=a.path(l.svgMovePt(b[h].topLeft)+l.svgLineAbsPt(b[h].botRight)),n=b[h].ordinal;m.attr({"stroke-linecap":"round","stroke-width":0===n||n===d-1?g:f});k.push(m)}return k}})();
(function(){glift.displays.raphael.Display.prototype.createMarks=function(){return new b(this._paper,this._environment,this._theme.marks)};var b=function(a,b,e){this.paper=a;this.environment=b;this.subtheme=e;this.marks={}};b.prototype={addMark:function(a,b,e){switch(a){case "XMARK":_addXMark(b,e)}return this},_addXMark:function(a,b){a.hash()},clearMark:function(a){},clearMarks:function(){}}})();
glift.displays.raphael.rutil={svgMove:function(b,a){return"M"+b+","+a},svgMovePt:function(b){return glift.displays.raphael.rutil.svgMove(b.x(),b.y())},svgLineRel:function(b,a){return"l"+b+","+a},svgLineRelPt:function(b){return glift.displays.raphael.rutil.svgLineRel(b.x(),b.y())},svgLineAbs:function(b,a){return"L"+b+","+a},svgLineAbsPt:function(b){return glift.displays.raphael.rutil.svgLineAbs(b.x(),b.y())}};
(function(){glift.displays.raphael.Display.prototype.createStarPoints=function(){return(new b(this._paper,this._environment,this._theme.board)).draw()};var b=function(a,b,e){this.paper=a;this.environment=b;this.subtheme=e;this.starSet=glift.util.none};b.prototype={draw:function(){this.destroy();for(var a=glift.util.point,b=this.environment.boardPoints,e=b.spacing*this.subtheme.starPointSize,d={9:[[4]],13:[[3,9],[6]],19:[[3,9,15]]}[this.environment.intersections]||[],f=this.paper.set(),g=0;g<d.length;g++)for(var k=
d[g],l=0;l<k.length;l++)for(var h=0;h<k.length;h++){var m=a(k[l],k[h]);b.hasCoord(m)&&(m=b.getCoord(m),f.push(this.paper.circle(m.x(),m.y(),e)))}f.attr({fill:this.subtheme.lineColor});this.starSet=f;return this},redraw:function(){return this.draw()},destroy:function(){this.starSet&&this.starSet!==glift.util.none&&this.starSet.remove();return this}}})();
(function(){glift.displays.raphael.Display.prototype.createStones=function(){return(new b(this._paper,this._environment,this._theme.stones)).draw()};var b=function(a,b,d){this.paper=a;this.environment=b;this.subtheme=d;this.stoneMap={}};b.prototype={draw:function(){var b={},e=this.environment.boardPoints,d;for(d in e.points){var f=e.points[d],g=glift.util.pointFromHash(d),f=new a(this.paper,g,f,e.spacing,this.subtheme);b[d]=f.draw()}this.stoneMap=b;return this},setClickHandler:function(a){return this._handler("clickHandler",
a)},setHoverInHandler:function(a){return this._handler("hoverInHandler",a)},setHoverOutHandler:function(a){return this._handler("hoverOutHandler",a)},_handler:function(a,b){for(var d in this.stoneMap)this.stoneMap[d][a]=b;return this},forceClick:function(a){this.stoneMap[a.hash()].bboxClick()},forceHoverIn:function(a){this.stoneMap[a.hash()].bboxHoverIn()},forceHoverOut:function(a){this.stoneMap[a.hash()].bboxHoverOut()},setColor:function(a,b){var d=this.stoneMap[a.hash()];if(void 0===d)throw"Could not find stone for point: "+
a.toString();d.setColor(b);return this},destroy:function(){for(var a in this.stoneMap)this.stoneMap[a].destroy();this.stoneMap={}}};var a=function(a,b,d,f,g){this.paper=a;this.intersection=b;this.coordinate=d;this.subtheme=g;this.radius=f/2-0.2;this.bbox=this.circle=glift.util.none;this.bboxHoverIn=function(){throw"bboxHoverIn not Defined";};this.bboxHoverOut=function(){throw"bboxHoverOut not defined";};this.bboxClick=function(){throw"bboxClick not defined";};this.clickHandler=function(a){};this.hoverInHandler=
function(a){};this.hoverOutHandler=function(a){}};a.prototype={draw:function(){var a=this.paper,b=this.radius,d=this.coordinate,f=this.intersection,g=this;this.circle=a.circle(d.x(),d.y(),b);this.bbox=a.rect(d.x()-b,d.y()-b,2*b,2*b);this.bbox.attr({fill:"white",opacity:0});this.bboxHoverIn=function(){g.hoverInHandler(f)};this.bboxHoverOut=function(){g.hoverOutHandler(f)};this.bboxClick=function(){g.clickHandler(f)};this.bbox.hover(this.bboxHoverIn,this.bboxHoverOut);this.bbox.click(this.bboxClick);
this.setColor("EMPTY");return this},setColor:function(a){if(this.circle===glift.util.none)throw"Circle was not initialized, so cannot set color";a in this.subtheme||glift.util.logz("Key "+a+" not found in theme");this.circle.attr(this.subtheme[a])},destroy:function(){if(this.circle===glift.util.none||this.bbox===glift.util.none)return this;this.bbox.unhover(this.bboxHoverIn,this.bboxHoverOut);this.bbox.unclick(this.bboxClick);this.bbox.remove();this.circle.remove();return this},_bboxToFront:function(){this.bbox&&
this.bbox!==glift.util.non&&this.bbox.toFront();return this},addMark:function(a,b){}}})();
